package co.datainsider.jobworker.client.lazada

import co.datainsider.jobworker.domain.RangeValue
import co.datainsider.jobworker.util.JsonUtils
import com.fasterxml.jackson.databind.JsonNode

/**
  * created 2023-04-12 6:13 PM
 *
  * @author tvc12 - Thien Vi
  */
class MockLazadaClient extends LazadaClient {
  override def getOrders(updatedTimeRange: RangeValue[String], offset: Long): OrderResponse = {
    val json =
      """{"code":"0","data":{"count":"10","countTotal":"500","orders":[{"voucher_platform":"0.00","voucher":"0.00","warehouse_code":"dropshipping","order_number":"491253082180001","voucher_seller":"0.00","created_at":"2018-02-09T22:44:30+08:00","voucher_code":"1234","gift_option":"false","shipping_fee_discount_platform":"0.00","customer_last_name":"last_name","promised_shipping_times":"shipping_time","updated_at":"2018-02-09T22:44:30+08:00","price":"106.00","national_registration_number":"1","shipping_fee_original":"0.00","payment_method":"COD","address_updated_at":"null","customer_first_name":"Ha Hung","shipping_fee_discount_seller":"0.00","shipping_fee":"0.54","branch_number":"2222","tax_code":"562562","items_count":"2","delivery_info":"delivery","statuses":[],"address_billing":{"country":"Singapore","address3":"address3","phone":"61****7","address2":"address2","city":"Singapore-Singapore-500001","address1":"1 CHANGI VILLAGE ROAD, 11","post_code":"500001","phone2":"61****7","last_name":"last_name","address5":"address5","address4":"address4","first_name":"Ha Hung"},"extra_attributes":"null","order_id":"491253082180001","remarks":"remarks","gift_message":"1","address_shipping":{"country":"Singapore","address3":"address3","phone":"6****67","address2":"address2","city":"Singapore-Singapore-500001","address1":"1 CHANGI VILLAGE ROAD, 11","post_code":"500001","phone2":"4***456","last_name":"last_name","address5":"address5","address4":"address4","first_name":"Ha Hung"}}]},"request_id":"0ba2887315178178017221014"}"""
    val response = JsonUtils.fromJson[LazadaResponse[OrderResponse]](json)
    response.getData().get
  }

  override def getOrderItems(orderIds: Set[String]): Seq[OrderItemResponse] = {
    val json =
      """{"code":"0","data":[{"order_number":"300029225","order_id":"32793","order_items":[{"pick_up_store_info":{"pick_up_store_address":"Ali Center, Shenzhen","pick_up_store_name":"Alibaba","pick_up_store_open_hour":["Sunday 9:00-18:00","Mondday,Tuesday,Wendnesday,Thursday,Friday 8:00-20:00"],"pick_up_store_code":"d4b04804-9192-4a8c-8ed1-5ebcd7d3c067"},"tax_amount":"6.48","reason":"reason","sla_time_stamp":"2019-06-24T23:59:59+08:00","voucher_seller":"0.00","purchase_order_id":"3454","voucher_code_seller":"X234","voucher_code":"X3453","package_id":"345","buyer_id":"1001","variation":"1","product_id":"12345","voucher_code_platform":"Y123","purchase_order_number":"345345","sku":"BRSD#02","order_type":"Normal","invoice_number":"1342","cancel_return_initiator":"cancellation-customer","shop_sku":"BE494HLAAUE3SGAMZ-39898","is_reroute":"0","stage_pay_status":"unpaid","sku_id":"666","tracking_code_pre":"23534","order_item_id":"98108","shop_id":"dawen dp","order_flag":"GUATANTEE","is_fbl":"0","name":"Bean Rester Dooby Red","delivery_option_sof":"0","order_id":"31202","fulfillment_sla":"NEXT_DAY","status":"canceled","product_main_image":"http://th-live-02.slatic.net/p/3/jianyue-7699-09550735-ccd244666871f12a523c77d68cd76d74-catalog.jpg","voucher_platform":"0.00","paid_price":"99.00","product_detail_url":"http://www.lazada.co.th/535590.html","warehouse_code":"WH-01","promised_shipping_time":"2014-10-15T19:12:15+08:00","shipping_type":"Dropshipping","created_at":"2014-10-15T19:12:15+08:00","voucher_seller_lpi":"0.00","shipping_fee_discount_platform":"0.00","wallet_credits":"0.00","updated_at":"2014-10-15T19:12:15+08:00","currency":"SGD","shipping_provider_type":"standard","voucher_platform_lpi":"0.00","shipping_fee_original":"0.00","item_price":"99.00","is_digital":"0","shipping_service_cost":"0","tracking_code":"456","shipping_fee_discount_seller":"0.00","shipping_amount":"0.00","reason_detail":"reason detail","return_status":"1","shipment_provider":"LEL","priority_fulfillment_tag":"Kirim secepat mungkin_null_null","voucher_amount":"0.00","digital_delivery_info":"delivery","extra_attributes":"null"}]}],"request_id":"0ba2887315178178017221014"}
        |""".stripMargin
    val lazadaResponse = JsonUtils.fromJson[LazadaResponse[Seq[OrderItemResponse]]](json)
    lazadaResponse.getData().get
  }

  override def getProducts(syncRangeValue: RangeValue[String], offset: Long): ProductListResponse = {
    val json =
      """{"code":"0","data":{"total_products":"10","products":[{"created_time":"1611554725000","updated_time":"1611554725000","images":"[     \"https://my-live.slatic.net/p/540bc796d1eadf316018038d8840f20a.jpg\",     \"https://my-live.slatic.net/p/8913fc357e139ef78ad2f071e9586334.jpg\" ]","skus":[{"Status":"active","quantity":0,"product_weight":"0.03","Images":["http://sg-live-01.slatic.net/p/BUYI1-catalog.jpg","","","","","","",""],"SellerSku":"39817:01:01","ShopSku":"BU565ELAX8AGSGAMZ-1104491","Url":"https://alice.lazada.sg/asd-1083832.html","package_width":"10.00","special_to_time":"2020-02-0300:00","special_from_time":"2015-07-3100:00","package_height":"4.00","special_price":9,"price":32,"package_length":"10.00","package_weight":"0.04","Available":0,"SkuId":314525867,"special_to_date":"2020-02-03"}],"item_id":"180226526","suspendedSkus":[],"subStatus":"Lock,Reject,Live Reject,Admin","trialProduct":"false","rejectReason":[{"suggestion":"","violationDetail":"Wrong Description,Price Not Reasonable,Wrong Image, No White Background:Wrong image resolution"}],"primary_category":"10000211","marketImages":"[     \"https://my-live.slatic.net/p/540bc796d1eadf316018038d8840f20a.jpg\",     \"https://my-live.slatic.net/p/8913fc357e139ef78ad2f071e9586334.jpg\" ]","attributes":{"short_description":"<ul><li>asdasd</li></ul>","name":"asd","description":"<p>asd</p>\n","warranty_type":"International Manufacturer","brand":"Asante"},"status":"Active,InActive,Pending QC,Suspended,Deleted"}]},"request_id":"0ba2887315178178017221014"}"""
    val lazadaResponse = JsonUtils.fromJson[LazadaResponse[ProductListResponse]](json)
    lazadaResponse.getData().get
  }

  override def getFlexiComboList(page: Long): FlexiComboListResponse = {
    val json =
      """{"error_msg":"null","code":"0","data":{"data_list":[{"stackable":"false","apply":"SPECIFIC_PRODUCTS","gift_skus":[{"product_id":"600956022","sku_id":"1742246015"}],"end_time":"1593878399000","discount_value":[],"sample_skus":[{"product_id":"640558086","sku_id":"1926072105"}],"discount_type":"freeGift","type":"Flexi-combo","start_time":"1593705600000","order_used_numbers":"20","name":"终极","platform_channel":"null","id":"9786600553530","criteria_type":"QUANTITY","criteria_value":[],"order_numbers":"10","status":"ONGOING"}],"total":"118","current":"1","page_size":"10"},"success":"true","error_code":"null","request_id":"0ba2887315178178017221014"}"""
    val lazadaResponse = JsonUtils.fromJson[LazadaResponse[FlexiComboListResponse]](json)
    lazadaResponse.getData().get
  }

  override def getPayoutStatusList(createdAfter: String): Seq[JsonNode] = {
    val json =
      """{"code":"0","data":[{"subtotal2":"51.20","subtotal1":"51.20","shipment_fee_credit":"51.20","payout":"3962.41 EUR","item_revenue":"0","created_at":"2018-01-04 00:23:04","other_revenue_total":"0","fees_total":"51.20","refunds":"0","guarantee_deposit":"0","updated_at":"2018-01-04 00:23:04","fees_on_refunds_total":"0","closing_balance":"3962.41","paid":"0","opening_balance":"0.00","statement_number":"EG100RT-20141228","shipment_fee":"51.20"}],"request_id":"0ba2887315178178017221014"}"""
    val lazadaResponse = JsonUtils.fromJson[LazadaResponse[Seq[JsonNode]]](json)
    lazadaResponse.getData().get
  }

  override def getTransactionDetails(syncRangeValue: RangeValue[String], offset: Long): Seq[JsonNode] = {
    val json = """{"code":"0","data":[{"order_no":"123445666666","transaction_date":"17 May 2016","amount":"-0.62","paid_status":"Not paid","shipping_provider":"LEX","WHT_included_in_amount":"Yes","payment_ref_id":"paymentRefId","lazada_sku":"Item test -123","fee_type":"13","transaction_type":"Payment Fee","orderItem_no":"1666666","orderItem_status":"orderItemStatus","reference":"1340","fee_name":"feeName","shipping_speed":"shippingSpeed","WHT_amount":"0.0112","transaction_number":"SG103EF-1P9VK1A","seller_sku":"sellerSKU","statement":"11 May 2016 - 17 May 2016","details":"details","comment":"comment","VAT_in_amount":"0.0672","shipment_type":"Dropshipping"}],"request_id":"0ba2887315178178017221014"}"""
    val lazadaResponse = JsonUtils.fromJson[LazadaResponse[Seq[JsonNode]]](json)
    lazadaResponse.getData().get
  }

  /**
   * get partner transaction detail
   */
  override def getPartnerTransactions(syncRangeValue: RangeValue[String], offset: Long): PartnerTransactionListResponse = {
    val json = """{"result":{"model_list":[{"voucher_platform":"0.00","voucher":"0.00","warehouse_code":"dropshipping","order_number":"491253082180001","voucher_seller":"0.00","created_at":"2022-09-28 14:41:18","voucher_code":"1234","gift_option":"false","shipping_fee_discount_platform":"0.00","customer_last_name":"last_name","updated_at":"2018-02-09T22:44:30+08:00","promised_shipping_times":"shipping_time","price":"106.00","national_registration_number":"1","shipping_fee_original":"0.00","payment_method":"COD","address_updated_at":"2022-09-28 22:48:28","customer_first_name":"Ha Hung","member_sub_order_list":[{"pick_up_store_info":{"pick_up_store_address":"Ali Center, Shenzhen","pick_up_store_name":"Alibaba","pick_up_store_open_hour":["[\"Sunday 9:00-18:00\", \"Mondday,Tuesday,Wendnesday,Thursday,Friday 8:00-20:00\"]","[\"Sunday 9:00-18:00\", \"Mondday,Tuesday,Wendnesday,Thursday,Friday 8:00-20:00\"]"],"pick_up_store_code":"d4b04804-9192-4a8c-8ed1-5ebcd7d3c067"},"tax_amount":"6.48","reason":"reason","sla_time_stamp":"2019-06-24T23:59:59+08:00","voucher_seller":"0.00","purchase_order_id":"3454","voucher_code_seller":"X234","voucher_code":"X3453","package_id":"345","buyer_id":"1001","variation":"1","product_id":"12345","voucher_code_platform":"Y123","purchase_order_number":"345345","sku":"BRSD#02","order_type":"Normal","invoice_number":"1342","seller_id":"1001111","cancel_return_initiator":"Indicates who initiated the canceled or returned order. Possible values are cancellation-internal, cancellation-customer, cancellation-failed Delivery, cancellation-seller, return-customer, and refund-internal.","shop_sku":"BE494HLAAUE3SGAMZ-39898","is_reroute":"0","stage_pay_status":"unpaid","sku_id":"666","tracking_code_pre":"23534","order_item_id":"98108","shop_id":"Seller name","order_flag":"GUATANTEE","is_fbl":"0","name":"Bean Rester Dooby Red","order_id":"31202","status":"status","product_main_image":"Product main image URL","voucher_platform":"0.00","paid_price":"99.00","product_detail_url":"http://www.lazada.co.th/535590.html","warehouse_code":"WH-01","promised_shipping_time":"2014-10-15 19:12:15 +0800","shipping_type":"Dropshipping","created_at":"2014-10-15 19:12:15 +0800","voucher_seller_lpi":"0.00","shipping_fee_discount_platform":"0.00","wallet_credits":"0.00","updated_at":"2014-10-15 19:12:15 +0800","currency":"ISO 4217 compatible currency code","shipping_provider_type":"standard","voucher_platform_lpi":"0.00","shipping_fee_original":"0.00","item_price":"Product price","is_digital":"0","shipping_service_cost":"0","tracking_code":"456","shipping_fee_discount_seller":"0.00","shipping_amount":"0.00","reason_detail":"reason detail","return_status":"1","partner_user_id":"LorealLANSG-B","shipment_provider":"LEL","voucher_amount":"0.00","digital_delivery_info":"delivery","extra_attributes":"null"}],"shipping_fee_discount_seller":"0.00","shipping_fee":"0.54","branch_number":"2222","tax_code":"562562","items_count":"1","delivery_info":"delivery","statuses":["unpaid、pending、repacked、packed、ready_to_ship_pending、ready_to_ship、shipping、delivered、lost、failed、canceled、returned、damaged_by_3pl、lost_by_3pl","unpaid、pending、repacked、packed、ready_to_ship_pending、ready_to_ship、shipping、delivered、lost、failed、canceled、returned、damaged_by_3pl、lost_by_3pl"],"address_billing":{"country":"Singapore","address3":"address3","phone":"4***457","address2":"address2","city":"Singapore-Singapore-500001","address1":"1 CHANGI VILLAGE ROAD, 11","post_code":"500001","phone2":"4***456","last_name":"last_name","address5":"address5","address4":"address4","first_name":"Ha Hung"},"extra_attributes":"null","order_id":"491253082180001","gift_message":"1","remarks":"remarks","address_shipping":{"country":"Singapore","address3":"address3","phone":"4***457","address2":"address2","city":"Singapore-Singapore-500001","address1":"1 CHANGI VILLAGE ROAD, 11","post_code":"500001","phone2":"4***456","last_name":"last_name","address5":"address5","address4":"address4","first_name":"Ha Hung"}}],"total_count":"2289","page_no":"1","page_size":"100"},"code":"0","request_id":"0ba2887315178178017221014"}"""
    val lazadaResponse = JsonUtils.fromJson[LazadaResponse[PartnerTransactionListResponse]](json)
    lazadaResponse.getData().get
  }
}
